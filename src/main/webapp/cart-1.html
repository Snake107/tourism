<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Panagea - Premium site template for travel agencies, hotels and restaurant listing.">
    <meta name="author" content="Ansonika">
    <title>name is null</title>

    <!-- Favicons-->
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" type="image/x-icon" href="img/apple-touch-icon-57x57-precomposed.png">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="72x72" href="img/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="114x114" href="img/apple-touch-icon-114x114-precomposed.png">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="144x144" href="img/apple-touch-icon-144x144-precomposed.png">

    <!-- BASE CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
	<link href="css/vendors.css" rel="stylesheet">

    <!-- YOUR CUSTOM CSS -->
    <link href="css/custom.css" rel="stylesheet">
	<script src="js/jquery-2.2.4.min.js"></script>
</head>

<body>
	
	<div id="page" class="theia-exception">
		
	<header class="header menu_fixed">
		<div id="preloader"><div data-loader="circle-side"></div></div><!-- /Preload -->
		<div id="logo">
			<a href="index-7.html">
				<img src="img/logo.png" width="150" height="36" data-retina="true" alt="" class="logo_normal">
				<img src="img/logo_sticky.png" width="150" height="36" data-retina="true" alt="" class="logo_sticky">
			</a>
		</div>
		<ul id="top_menu">
			<li><a href="cart-3.html" class="cart-menu-btn" title="Cart"><strong>4</strong></a></li>
			<li><a href="#sign-in-dialog" id="sign-in" class="login" title="Sign In">Sign In</a></li>
			<li><a href="wishlist.html" class="wishlist_bt_top" title="Your wishlist">Your wishlist</a></li>
		</ul>
		<!-- /top_menu -->
		<a href="#menu" class="btn_mobile">
			<div class="hamburger hamburger--spin" id="hamburger">
				<div class="hamburger-box">
					<div class="hamburger-inner"></div>
				</div>
			</div>
		</a>
		<nav id="menu" class="main-menu">
			<ul>
				<li><span><a href="index-7.html">Home</a></span>
				</li>
				<li><span><a href="tours-grid-sidebar-2.html">Tours</a></span>
				</li>
				<li><span><a href="hotels-grid-sidebar-2.html">Hotels</a></span>
				</li>
				<li><span><a href="restaurants-grid-isotope.html">Eat &amp; Drink</a></span>
				</li>
				<li><span><a href="blog.html">blog</a></span>
				</li>
				<li><span><a href="contacts.html">contacts</a></span>
				</li>
				<li><span><a href="pricing-tables.html">vip</a></span></li>
				<li><span><a href="about.html">About</a></span></li>
			</ul>
		</nav>

	</header>
	<!-- /header -->
	
	<main>
		<div class="hero_in cart_section">
			<div class="wrapper">
				<div class="container">
					<div class="bs-wizard clearfix">
						<div class="bs-wizard-step active">
							<div class="text-center bs-wizard-stepnum">你的购物车</div>
							<div class="progress">
								<div class="progress-bar"></div>
							</div>
							<a href="#0" class="bs-wizard-dot"></a>
						</div>

						<div class="bs-wizard-step disabled">
							<div class="text-center bs-wizard-stepnum">支付</div>
							<div class="progress">
								<div class="progress-bar"></div>
							</div>
							<a href="#0" class="bs-wizard-dot"></a>
						</div>

						<div class="bs-wizard-step disabled">
							<div class="text-center bs-wizard-stepnum">支付完成!</div>
							<div class="progress">
								<div class="progress-bar"></div>
							</div>
							<a href="#0" class="bs-wizard-dot"></a>
						</div>
					</div>
					<!-- End bs-wizard -->
				</div>
			</div>
		</div>
		<!--/hero_in-->

		<div class="bg_color_1">
			<div class="container margin_60_35">
				<div class="row">
					<div class="col-lg-8">
						<div class="box_cart">
						<table class="table table-striped cart-list">
							<thead>
								<tr>
									<th>
										商品
									</th>
									<th>
										折扣价
									</th>
									<th>
										数量
									</th>
									<th>
										价格
									</th>
									<th>
										总价
									</th>
									<th>
										删除
									</th>
								</tr>
							</thead>
							<tbody id="tab1">
								<tr>
									<td>
										<div class="thumb_cart">
											<img src="http://via.placeholder.com/150x150/ccc/fff/thumb_cart_1.jpg" alt="Image">
										</div>
										<span class="item_cart">Persius delenit has cu</span>
									</td>
									<td>
										0%
									</td>
									<td>
										<strong>24,71$</strong>
									</td>
									<td class="options" style="width:5%; text-align:center;">
										<a href="#"><i class="icon-trash"></i></a>
									</td>
								</tr>

							</tbody>
						</table>
						<div class="cart-options clearfix">
							<div class="float-left">
								<div class="apply-coupon">
									<div class="form-group">
										<input type="text" name="coupon-code" value="" placeholder="优惠券码" class="form-control">
									</div>
									<div class="form-group">
										<button type="button" class="btn_1 outline">申请优惠券</button>
									</div>
								</div>
							</div>
							<div class="float-right fix_mobile">
								<button type="button" class="btn_1 outline" onclick="getShopCart()">更新购物车</button>
							</div>
						</div>
						<!-- /cart-options -->
					</div>
					</div>
					<!-- /col -->
					
					<aside class="col-lg-4" id="sidebar">
						<div class="box_detail">
							<div id="total_cart">
								总价格 <span class="float-right" id="total_money" >69.00$</span>
							</div>
							<ul class="cart_details">
								<li>From <span>02-11-18</span></li>
								<li>To <span>04-11-18</span></li>
								<li>Adults <span>2</span></li>
								<li>Childs <span>1</span></li>
							</ul>
							<a href="#" class="btn_1 full-width purchase" onclick="pay()">选择支付方式</a>
							<div class="text-center"><small>No money charged in this step</small></div>
						</div>
					</aside>
				</div>
				<!-- /row -->
			</div>
			<!-- /container -->
		</div>
		<!-- /bg_color_1 -->
	</main>
	<!--/main-->
		<script type="text/javascript">
            var payObj;
			function delById(obj) {

				//alert(obj)
				$.ajax({
					url: "/tourism/buycart/delShopCartByID",    //请求的url地址
					dataType: "json",   //返回格式为json
					async: true,//请求是否异步，默认为异步，这也是ajax重要特性
					contentType: "application/json;charset=utf-8",
					data: JSON.stringify(
							{
								"id": obj
							}
					),    //参数值
					type: "POST",   //请求方式
					success: function (data) {
						console.log(data)
						//请求成功时处理
						getShopCart();
					},

					error: function () {
						//请求出错处理
					}
				});
			}
			function getShopCart(){
				$.ajax({
					url:"/tourism/buycart/getShopCartById",    //请求的url地址
					dataType:"json",   //返回格式为json
					async:false,//请求是否异步，默认为异步，这也是ajax重要特性
					contentType:"application/json;charset=utf-8",
					data:JSON.stringify(
							{
								"id":"1"
							}
					),    //参数值
					type:"POST",   //请求方式
					success:function(data){
						console.log(data)
						//请求成功时处理
                        payObj=data
						var value ="";
						$.each(data.shoppingCartList,function (i, item){
							value += "<tr>\n" +
									"\t\t\t\t\t\t\t\t\t<td>\n" +
									"\t\t\t\t\t\t\t\t\t\t<div class=\"thumb_cart\">\n" +
									"\t\t\t\t\t\t\t\t\t\t\t<img src=\"http://via.placeholder.com/150x150/ccc/fff/thumb_cart_1.jpg\" alt=\"Image\">\n" +
									"\t\t\t\t\t\t\t\t\t\t</div>\n" +
									"\t\t\t\t\t\t\t\t\t\t<span class=\"item_cart\">"+item.commodityName+"</span>\n" +
									"\t\t\t\t\t\t\t\t\t</td>\n" +
									"\t\t\t\t\t\t\t\t\t<td>\n" +
									"\t\t\t\t\t\t\t\t\t\t"+(item.discount*10)+"%\n" +
									"\t\t\t\t\t\t\t\t\t</td>\n" +
									"\t\t\t\t\t\t\t\t\t<td>\n" +
									"\t\t\t\t\t\t\t\t\t\t<input name= \'"+item.id+"\' type=\"number\" value='"+item.commodityNum+"' onchange='changeShopCart(this.name)'/>\n" +
									"\t\t\t\t\t\t\t\t\t</td>\n" +
									"\t\t\t\t\t\t\t\t\t<td>\n" +
									"\t\t\t\t\t\t\t\t\t\t"+item.originalCost+"$\n" +
									"\t\t\t\t\t\t\t\t\t</td>\n" +
									"\t\t\t\t\t\t\t\t\t<td>\n" +
									"\t\t\t\t\t\t\t\t\t\t<strong>"+(item.originalCost*item.commodityNum)+"$</strong>\n" +
									"\t\t\t\t\t\t\t\t\t</td>\n" +
									"\t\t\t\t\t\t\t\t\t<td class=\"options\" style=\"width:5%; text-align:center;\">\n" +
									"\t\t\t\t\t\t\t\t\t\t<a name=\'"+item.id+"\' href=\"#\" onclick='delById(this.name)'><i class=\"icon-trash\"  ></i></a>\n" +
									"\t\t\t\t\t\t\t\t\t</td>\n" +
									"\t\t\t\t\t\t\t\t</tr>"
						})
						$("#tab1").html(value);
                        var  totalMoney = data.totalOriginalMoney+"$";
                        console.log(totalMoney)
                        console.log($("#total_money").text())
                        $("#total_money").text(totalMoney)

					},

					error:function(){
						//请求出错处理
					}
				});
			}
			function changeShopCart(obj){
				var element = document.getElementsByName(obj)[0];
				console.log(element.value)
				$.ajax({
					url: "/tourism/buycart/updateShopCartNum",    //请求的url地址
					dataType: "json",   //返回格式为json
					async: true,//请求是否异步，默认为异步，这也是ajax重要特性
					contentType: "application/json;charset=utf-8",
					data: JSON.stringify(
							{
								"id": obj,
								"commodityNum":element.value
							}
					),    //参数值
					type: "POST",   //请求方式
					success: function (data) {
						console.log(data)
						//请求成功时处理
						getShopCart();
					},

					error: function () {
						//请求出错处理
					}
				});
			}
            function pay(){
			    console.log(payObj)
                /*cart-2.html*/
                $.ajax({
                    url: "/tourism/buycart/toPay",    //请求的url地址
                    dataType: "json",   //返回格式为json
                    async: true,//请求是否异步，默认为异步，这也是ajax重要特性
                    contentType: "application/json;charset=utf-8",
                    data: JSON.stringify(
                        {
                            "totalOriginalMoney":payObj.totalOriginalMoney,
                            "shoppingCartList":payObj.shoppingCartList
                        }
                    ),    //参数值
                    type: "POST",   //请求方式
                    success: function (data) {
                        console.log(data)
                        //请求成功时处理
                        location.href="cart-2.html";
                    },

                    error: function () {
                        //请求出错处理
                    }
                });

            }

			$(function () {
				getShopCart();


			})





		</script>
	
	<footer>
		<div class="container margin_60_35">
			<div class="row">
				<div class="col-lg-5 col-md-12 p-r-5">
					<p><img src="img/logo.png" width="150" height="36" data-retina="true" alt=""></p>
					<p>Mea nibh meis philosophia eu. Duis legimus efficiantur ea sea. Id placerat tacimates definitionem sea, prima quidam vim no. Duo nobis persecuti cu. Nihil facilisi indoctum an vix, ut delectus expetendis vis.</p>
					<div class="follow_us">
						<ul>
							<li>Follow us</li>
							<li><a href="#0"><i class="ti-facebook"></i></a></li>
							<li><a href="#0"><i class="ti-twitter-alt"></i></a></li>
							<li><a href="#0"><i class="ti-google"></i></a></li>
							<li><a href="#0"><i class="ti-pinterest"></i></a></li>
							<li><a href="#0"><i class="ti-instagram"></i></a></li>
						</ul>
					</div>
				</div>
				<div class="col-lg-3 col-md-6 ml-lg-auto">
					<h5>Useful links</h5>
					<ul class="links">
						<li><a href="about.html">About</a></li>
						<li><a href="login.html">Login</a></li>
						<li><a href="register.html">Register</a></li>
						<li><a href="blog.html">News &amp; Events</a></li>
						<li><a href="contacts.html">Contacts</a></li>
					</ul>
				</div>
				<div class="col-lg-3 col-md-6">
					<h5>Contact with Us</h5>
					<ul class="contacts">
						<li><a href="tel://61280932400"><i class="ti-mobile"></i> + 61 23 8093 3400</a></li>
						<li><a href="mailto:info@Panagea.com"><i class="ti-email"></i> info@Panagea.com</a></li>
					</ul>
					<div id="newsletter">
					<h6>Newsletter</h6>
					<div id="message-newsletter"></div>
					<form method="post" action="assets/newsletter.php" name="newsletter_form" id="newsletter_form">
						<div class="form-group">
							<input type="email" name="email_newsletter" id="email_newsletter" class="form-control" placeholder="Your email">
							<input type="submit" value="Submit" id="submit-newsletter">
						</div>
					</form>
					</div>
				</div>
			</div>
			<!--/row-->
			<hr>
			<div class="row">
				<div class="col-lg-6">
					<ul id="footer-selector">
						<li>
							<div class="styled-select" id="lang-selector">
								<select>
									<option value="English" selected>English</option>
									<option value="French">French</option>
									<option value="Spanish">Spanish</option>
									<option value="Russian">Russian</option>
								</select>
							</div>
						</li>
						<li>
							<div class="styled-select" id="currency-selector">
								<select>
									<option value="US Dollars" selected>US Dollars</option>
									<option value="Euro">Euro</option>
								</select>
							</div>
						</li>
						<li><img src="img/cards_all.svg" alt=""></li>
					</ul>
				</div>
				<div class="col-lg-6">
					<ul id="additional_links">
						<li><a href="#0">Terms and conditions</a></li>
						<li><a href="#0">Privacy</a></li>
						<li><span>© 2018 Panagea</span></li>
					</ul>
				</div>
			</div>
		</div>
	</footer>
	<!--/footer-->
	</div>
	<!-- page -->
	
	<!-- Sign In Popup -->
	<div id="sign-in-dialog" class="zoom-anim-dialog mfp-hide">
		<div class="small-dialog-header">
			<h3>Sign In</h3>
		</div>
		<form>
			<div class="sign-in-wrapper">
				<a href="#0" class="social_bt facebook">Login with Facebook</a>
				<a href="#0" class="social_bt google">Login with Google</a>
				<div class="divider"><span>Or</span></div>
				<div class="form-group">
					<label>Email</label>
					<input type="email" class="form-control" name="email" id="email">
					<i class="icon_mail_alt"></i>
				</div>
				<div class="form-group">
					<label>Password</label>
					<input type="password" class="form-control" name="password" id="password" value="">
					<i class="icon_lock_alt"></i>
				</div>
				<div class="clearfix add_bottom_15">
					<div class="checkboxes float-left">
						<label class="container_check">Remember me
						  <input type="checkbox">
						  <span class="checkmark"></span>
						</label>
					</div>
					<div class="float-right mt-1"><a id="forgot" href="javascript:void(0);">Forgot Password?</a></div>
				</div>
				<div class="text-center"><input type="submit" value="Log In" class="btn_1 full-width"></div>
				<div class="text-center">
					Don’t have an account? <a href="register.html">Sign up</a>
				</div>
				<div id="forgot_pw">
					<div class="form-group">
						<label>Please confirm login email below</label>
						<input type="email" class="form-control" name="email_forgot" id="email_forgot">
						<i class="icon_mail_alt"></i>
					</div>
					<p>You will receive an email containing a link allowing you to reset your password to a new preferred one.</p>
					<div class="text-center"><input type="submit" value="Reset Password" class="btn_1"></div>
				</div>
			</div>
		</form>
		<!--form -->
	</div>
	<!-- /Sign In Popup -->
	
	<div id="toTop"></div><!-- Back to top button -->
	
	<!-- COMMON SCRIPTS -->

    <script src="js/common_scripts.js"></script>
    <script src="js/main.js"></script>
	<script src="assets/validate.js"></script>
	
	
	
  
</body>
</html>